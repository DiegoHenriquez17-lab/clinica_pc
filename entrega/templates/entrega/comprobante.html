{% extends "base.html" %}
{% load tz %}
{% block title %}Comprobante de entrega · Clínica PC{% endblock %}
{% block page_title %}Entrega · Comprobante{% endblock %}

{% block page_actions %}
  <button class="btn btn-outline-secondary d-print-none" onclick="window.print()">
    🖨️ Imprimir / Guardar PDF
  </button>
{% endblock %}

{% block content %}
{% if equipo and entrega %}
  <div class="row g-4">
    <div class="col-md-6">
      <h6 class="text-uppercase text-muted">Equipo</h6>
      <ul class="list-group">
        <li class="list-group-item"><strong>Estudiante:</strong> {{ equipo.estudiante }}</li>
        <li class="list-group-item"><strong>Equipo:</strong> {{ equipo.equipo }}</li>
        <li class="list-group-item"><strong>Diagnóstico:</strong> {{ equipo.diagnostico }}</li>
        <li class="list-group-item"><strong>Tipo:</strong> {{ equipo.tipo_solucion|capfirst }}</li>
      </ul>
    </div>
    <div class="col-md-6">
      <h6 class="text-uppercase text-muted">Entrega</h6>
      <ul class="list-group">
        <li class="list-group-item"><strong>Estado:</strong>
          {% if entrega.estado %}
            {{ entrega.estado|capfirst }}
          {% elif entrega.recibido_por %}
            Entregado
          {% else %}
            —
          {% endif %}
        </li>
        <li class="list-group-item"><strong>Observaciones:</strong> {{ entrega.observaciones|default:"—" }}</li>
        <li class="list-group-item"><strong>Fecha:</strong>
          {% if entrega.fecha_entrega %}
            {{ entrega.fecha_entrega|localtime|date:"d/m/Y H:i" }}
          {% elif entrega.created_at %}
            {{ entrega.created_at }}
          {% else %}
            —
          {% endif %}
        </li>
      </ul>
    </div>
  </div>
{% else %}
  <p class="text-muted m-0">Falta información para generar el comprobante.</p>
{% endif %}
{% endblock %}
